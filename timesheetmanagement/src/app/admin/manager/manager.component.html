<br />
<h6 class="text-left"> Link Manager With Employees </h6>
<form #managerForm="ngForm" (ngSubmit)="onSubmit(managerForm)">
  <input type="hidden" name="$key" #$key="ngModel" [(ngModel)]="managerService.selectedManager.$key"/>
  <div class="form-row">
    <div class="form-group col-md-4">
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <label class="input-group-text" for="inputGroupSelect01">Manager:</label>
        </div>
        <select class="form-control empty" id="inputGroupSelect01" name="manager" #manager="ngModel" [(ngModel)]="managerService.selectedManager.manager" required>
          <option [ngValue]="undefined" disabled selected>Select</option>
          <option *ngFor="let manager of managerList" [ngValue]="manager">{{manager.name}}</option>
        </select>
      </div>
    </div>
    <div class="form-group col-md-4">
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <label class="input-group-text" for="inputGroupSelect02">Project:</label>
        </div>
        <select class="form-control empty" id="inputGroupSelect02" name="project" #project="ngModel" [(ngModel)]="managerService.selectedManager.project" required>
          <option [ngValue]="undefined" disabled selected>Select</option>
          <option *ngFor="let project of projectList" [ngValue]="project">{{project.name}}</option>
        </select>
      </div>
    </div>
    <div class="form-group col-md-4">
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <label class="input-group-text" for="inputGroupSelect03">Employees:</label>
        </div>
        <select class="form-control empty" multiple id="inputGroupSelect03" name="employees" #employees="ngModel" [(ngModel)]="managerService.selectedManager.employees" required>
          <option [ngValue]="undefined" disabled selected>Select</option>
          <option *ngFor="let employee of empList" [ngValue]="employee">{{employee.id}} - {{employee.name}}</option>
        </select>
      </div>
    </div>
  </div>
  <div class="form-row">  
    <div class="form-group col-md-4">
      <button class="btn btn-default" type="submit"  [disabled]="!managerForm.valid"><i class="fa fa-floppy-o"></i> Submit </button>&nbsp;
      <button class="btn btn-default" type="button" (click)="onReset(managerForm)"><i class="fa fa-repeat"></i> Reset </button>
    </div>    
  </div>
</form>
<br />
<h6 class="text-center">ManagerEmployees List</h6>
<div class="form-group col-md-12">
  <div class="input-group mb-0">
    <div class="input-group-prepend">
      <label class="input-group-text" for="inlineFormInputGroup">Search:</label>
    </div>
    <input class="form-control" type="text" [(ngModel)]="term" />
  </div>
</div>
<br />
<div class="table-responsive-md">
  <table class="table table-sm table-hover">
      <thead class="thead-light">
        <tr>
          <th scope="col">ManagerID</th>
          <th scope="col">Name</th>
          <th scope="col">Project</th>
          <th scope="col">No of Emp's</th>
          <!--<th scope="col">Edit</th> -->
          <th scope="col">Delete</th>
        </tr>
      </thead>
      <tbody> 
        <tr *ngFor="let manager of mgrProjEmpsList | filter:term">
          <td>{{manager.mgr_id}}</td>
          <td>{{manager.mgr_name}}</td>
          <td>{{manager.proj_name}}</td>
          <td>
            <a class="btn" (click)="getMngrEmployees(manager.$key, content)">
              <i class="fa fa-list-alt" aria-hidden="true"> {{manager.empCount}}</i>
            </a>
          </td>
          <!--<td>
            <a class="btn" (click)="onEdit(manager)">
              <i class="fa fa-pencil-square-o"></i>
            </a>
          </td>-->
          <td>
            <a class="btn" (click)="onDelete(manager.$key)">
              <i class="fa fa-trash-o"></i>
            </a>
          </td>
        </tr>  
      <tbody>
  </table>
  <ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Employees:</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
    <table class="table table-sm table-hover">
      <thead class="thead-light">
        <tr>
          <th scope="col">EmpID</th>
          <th scope="col">Name</th>
        <tr>
      </thead>
      <tbody> 
        <tr *ngFor="let emp of mngrEmpList">
          <td>{{emp.id}}</td>
          <td>{{emp.name}}</td>
        </tr>
      </tbody>
    </table>
  </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="d('Cross click')">Close</button>
    </div>
  </ng-template>
</div>